<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>AddAsync Method
 | Hazelcast .NET Documentation </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="AddAsync Method
 | Hazelcast .NET Documentation ">
    
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../styles/docfx.css">
      <link rel="stylesheet" href="../../styles/main.css">
      <link rel="stylesheet" href="../../styles/hz.css">
      <meta property="docfx:navrel" content="../toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper" class="">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <img id="logo" src="../../images/hazelcast-white.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
              <div class="brandcrumb">.NET Client Documentation<br>5.3.1</div>
              <div id="breadhtml">
                <ul class="breadcrumb">
                  <li></li>
                </ul>
              </div>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync*">



<h1 id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync_" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync*">AddAsync Method
</h1>
<div class="markdown level0 summary"></div>
<div class="markdown level0 conceptual"></div>

<a id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync_" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync*"></a>
<h4 id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0_" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync(`0)">AddAsync(TItem)</h4>
<div class="markdown level1 summary"><p>Adds an item to the tail of the Ringbuffer.</p>
</div>
<div class="markdown level1 conceptual"></div>
<h5 class="declaration">Declaration</h5>
<div class="codewrapper">
  <pre><code class="lang- hljs">Task&lt;long&gt; AddAsync(TItem item)</code></pre>
</div>
<h5 class="parameters">Parameters</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-fourth"><span class="xref">TItem</span></td>
      <td><span class="parametername">item</span></td>
      <td><p>the item to Add.</p>
</td>
    </tr>
  </tbody>
</table>
<h5 class="returns">Returns</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-third"><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a>&gt;</td>
      <td><p>the sequence of the added item.</p>
</td>
    </tr>
  </tbody>
</table>
<h5 id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0__remarks">Remarks</h5>
<div class="markdown level1 remarks"><p>Adds an item to the tail of the Ringbuffer. If there is no space in the Ringbuffer, the Add will overwrite the oldest
item in the ringbuffer no matter what the ttl is. For more control on this behavior, check the
<a class="xref" href="Hazelcast.DistributedObjects.IHRingBuffer-1.AddAsync.html#Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0_">AddAsync(TItem)</a>
and the
<a class="xref" href="Hazelcast.DistributedObjects.OverflowPolicy.html">OverflowPolicy</a>
.
The returned value is the sequence of the added item. Using this sequence you can read the added item.</p>
<h3>Using the sequence as id</h3>
This sequence will always be unique for this Ringbuffer instance so it can be used as a unique id generator if you are
publishing items on this Ringbuffer. However you need to take care of correctly determining an initial id when any node
uses the ringbuffer for the first time. The most reliable way to do that is to write a dummy item into the ringbuffer and
use the returned sequence as initial id. On the reading side, this dummy item should be discard. Please keep in mind that
this id is not the sequence of the item you are about to publish but from a previously published item. So it can't be used
to find that item.
</div>
<h5 class="exceptions">Exceptions</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-third"><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></td>
      <td><p>if item is null.</p>
</td>
    </tr>
  </tbody>
</table>
<h5 id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0__seealso">See Also</h5>
<div class="seealso">
    <div><a class="xref" href="Hazelcast.DistributedObjects.IHRingBuffer-1.AddAsync.html#Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0_">AddAsync(TItem)</a></div>
</div>
<a id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync_" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync*"></a>
<h4 id="Hazelcast_DistributedObjects_IHRingBuffer_1_AddAsync__0_Hazelcast_DistributedObjects_OverflowPolicy_" data-uid="Hazelcast.DistributedObjects.IHRingBuffer`1.AddAsync(`0,Hazelcast.DistributedObjects.OverflowPolicy)">AddAsync(TItem, OverflowPolicy)</h4>
<div class="markdown level1 summary"><p>Asynchronously writes an item with a configurable
<a class="xref" href="Hazelcast.DistributedObjects.OverflowPolicy.html">OverflowPolicy</a>
.
If there is space in the ringbuffer, the call will return the sequence of the written item.
If there is no space, it depends on the overflow policy what happens:</p>
<ol>
<li>
<a class="xref" href="Hazelcast.DistributedObjects.OverflowPolicy.html#Hazelcast_DistributedObjects_OverflowPolicy_Overwrite">Overwrite</a>
: we just overwrite the oldest item in the ringbuffer and we violate
the ttl</li>
<li>
<a class="xref" href="Hazelcast.DistributedObjects.OverflowPolicy.html#Hazelcast_DistributedObjects_OverflowPolicy_Fail">Fail</a>
: we return -1 </li>
</ol>
The reason that FAIL exist is to give the opportunity to obey the ttl. If blocking behavior is required,
this can be implemented using retrying in combination with a exponential backoff. Example:
<pre><code class="lang-csharp">int sleepMs = 100;
for (; ; ) {
long result = ringbuffer.AddAsync(item, OverflowPolicy.Fail).Result;
if (result != -1) {
break;
}
Thread.Sleep(sleepMs);
sleepMs = Math.Min(5000, sleepMs * 2);
}</code></pre>
</div>
<div class="markdown level1 conceptual"></div>
<h5 class="declaration">Declaration</h5>
<div class="codewrapper">
  <pre><code class="lang- hljs">Task&lt;long&gt; AddAsync(TItem item, OverflowPolicy overflowPolicy)</code></pre>
</div>
<h5 class="parameters">Parameters</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-fourth"><span class="xref">TItem</span></td>
      <td><span class="parametername">item</span></td>
      <td><p>the item to Add</p>
</td>
    </tr>
    <tr>
      <td class="hz-one-fourth"><a class="xref" href="Hazelcast.DistributedObjects.OverflowPolicy.html">OverflowPolicy</a></td>
      <td><span class="parametername">overflowPolicy</span></td>
      <td><p>the OverflowPolicy to use.</p>
</td>
    </tr>
  </tbody>
</table>
<h5 class="returns">Returns</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-third"><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task-1">Task</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int64">long</a>&gt;</td>
      <td><p>the sequenceId of the added item, or -1 if the Add failed.</p>
</td>
    </tr>
  </tbody>
</table>
<h5 class="exceptions">Exceptions</h5>
<table class="table table-bordered table-striped table-condensed">
  <tbody>
    <tr>
      <td class="hz-one-third"><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></td>
      <td><p>if item or overflowPolicy is null.</p>
</td>
    </tr>
  </tbody>
</table>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      Copyright &copy; 2010-2023 Hazelcast, Inc. All rights reserved.<br>Generated by DocFX.
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
